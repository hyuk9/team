{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport UserDataService from \"../../services/UserDataService\";\nexport default {\n  data() {\n    return {\n      currentUser: null,\n      submitted: false,\n      message: \"\",\n      changePwd: false\n    };\n  },\n  methods: {\n    getUser(id) {\n      UserDataService.get(id) // spring 요청\n      //  성공/실패 모르겠지만\n      //  성공하면 then안에 있는것이 실행\n      .then(response => {\n        this.currentUser = response.data;\n        console.log(response.data);\n      })\n      //  실패하면 catch안에 있는것이 실행\n      .catch(e => {\n        console.log(e);\n      });\n    },\n    updateUser(id, changePwd, user) {\n      this.message = \"\";\n      this.submitted = true;\n      // form 유효성 체크 검사\n      // this.$validator.validate() : 유효하면 isValid = true , 아니면 isValid = false\n      this.$validator.validate().then(isValid => {\n        if (isValid) {\n          // user 값 초기화\n          // this.user = new User(\"\", \"\", \"\", this.role);\n          //  공유 저장소의 새사용자 등록 함수 실행\n          UserDataService.update(id, changePwd, user).then(response => {\n            console.log(response.data);\n            this.message = \"The User was updated successfully!\";\n          }).catch(e => {\n            console.log(e);\n          });\n        }\n      });\n    },\n    deleteUser() {\n      UserDataService.delete(this.currentUser.id).then(response => {\n        console.log(response.data);\n        this.$router.push(\"/user\");\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    changePassword() {\n      this.currentUser.password = \"\";\n      this.changePwd = true;\n    }\n  },\n  mounted() {\n    this.message = \"\";\n    this.getUser(this.$route.params.id);\n  }\n};","map":{"version":3,"mappings":";AA6EA;AAEA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACAC;MACA;MACA;MAAA,CACAC;QACA;QACAC;MACA;MACA;MAAA,CACAC;QACAD;MACA;IACA;IACAE;MACA;MACA;MACA;MACA;MACA;QACA;UACA;UACA;UACA;UACAJ,4CACAC;YACAC;YACA;UACA,GACAC;YACAD;UACA;QACA;MACA;IACA;IACAG;MACAL,4CACAC;QACAC;QACA;MACA,GACAC;QACAD;MACA;IACA;IACAI;MACA;MACA;IACA;EACA;EACAC;IACA;IACA;EACA;AACA","names":["data","currentUser","submitted","message","changePwd","methods","getUser","UserDataService","then","console","catch","updateUser","deleteUser","changePassword","mounted"],"sourceRoot":"src/components/admin","sources":["UserDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"col-md-12\">\r\n    <div v-if=\"currentUser\" class=\"container-fluid w-50\">\r\n      <div>\r\n        <div class=\"form-group\">\r\n          <label for=\"username\">Username</label>\r\n          <!-- v-validate : 유효성 체크 -->\r\n          <!-- v-validate=\"'required|min:3|max:20'\" 체크함 -->\r\n          <!-- errors.has('username') : 에러 발생했는지 검사 -->\r\n          <!-- {{errors.first('username')}} : 에러 있으면 화면 출력됨, 없으면 안됨 -->\r\n          <input\r\n            v-model=\"currentUser.username\"\r\n            v-validate=\"'required|min:3|max:20'\"\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            name=\"username\"\r\n          />\r\n          <!-- 유효성 체크 후 에러 체크 : errors.hat(체크대상) -->\r\n          <!-- errors.first(체크대상) : 에러 내용 출력 -->\r\n          <div v-if=\"submitted && errors.has('username')\" class=\"alert-danger\">\r\n            {{ errors.first(\"username\") }}\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"email\">Email</label>\r\n          <input\r\n            v-model=\"currentUser.email\"\r\n            v-validate=\"'required|email|max:50'\"\r\n            type=\"email\"\r\n            class=\"form-control\"\r\n            name=\"email\"\r\n          />\r\n          <div v-if=\"submitted && errors.has('email')\" class=\"alert-danger\">\r\n            {{ errors.first(\"email\") }}\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Password</label>\r\n          <input\r\n            v-model=\"currentUser.password\"\r\n            type=\"password\"\r\n            class=\"form-control\"\r\n            name=\"password\"\r\n            :disabled=\"!changePwd\"\r\n          />\r\n          <button class=\"mt-3 btn btn-warning btn-sm\" @click=\"changePassword\">패스워드 변경</button>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">role</label>\r\n          <select class=\"form-select\" v-model=\"currentUser.role[0].name\">\r\n            <option>ROLE_USER</option>\r\n            <option>ROLE_ADMIN</option>\r\n          </select>\r\n        </div>\r\n\r\n        <button class=\"mt-3 btn btn-danger\" @click=\"deleteUser\">Delete</button>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          class=\"ms-3 mt-3 btn btn-success\"\r\n          @click=\"updateUser(currentUser.id, changePwd, currentUser)\"\r\n        >\r\n          Update\r\n        </button>\r\n        <p>{{ message }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else>\r\n      <br />\r\n      <p>Please click on a User...</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UserDataService from \"../../services/UserDataService\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentUser: null,\r\n      submitted: false,\r\n      message: \"\",\r\n      changePwd: false,\r\n    };\r\n  },\r\n  methods: {\r\n    getUser(id) {\r\n      UserDataService.get(id) // spring 요청\r\n        //  성공/실패 모르겠지만\r\n        //  성공하면 then안에 있는것이 실행\r\n        .then((response) => {\r\n          this.currentUser = response.data;\r\n          console.log(response.data);\r\n        })\r\n        //  실패하면 catch안에 있는것이 실행\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n    updateUser(id, changePwd, user) {\r\n      this.message = \"\";\r\n      this.submitted = true;\r\n      // form 유효성 체크 검사\r\n      // this.$validator.validate() : 유효하면 isValid = true , 아니면 isValid = false\r\n      this.$validator.validate().then((isValid) => {\r\n        if (isValid) {\r\n          // user 값 초기화\r\n          // this.user = new User(\"\", \"\", \"\", this.role);\r\n          //  공유 저장소의 새사용자 등록 함수 실행\r\n          UserDataService.update(id, changePwd, user)\r\n            .then((response) => {\r\n              console.log(response.data);\r\n              this.message = \"The User was updated successfully!\";\r\n            })\r\n            .catch((e) => {\r\n              console.log(e);\r\n            });\r\n        }\r\n      });\r\n    },\r\n    deleteUser() {\r\n      UserDataService.delete(this.currentUser.id)\r\n        .then((response) => {\r\n          console.log(response.data);\r\n          this.$router.push(\"/user\");\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n    changePassword() {\r\n      this.currentUser.password = \"\";\r\n      this.changePwd = true;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.message = \"\";\r\n    this.getUser(this.$route.params.id);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}